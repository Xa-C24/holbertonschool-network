#!/usr/bin/env bash
# This script configures /etc/hosts to update localhost and facebook.com resolutions.

# Check if the script is executed with sudo
if [ "$(id -u)" -ne 0 ]; then
  echo "This script must be run as root. Use sudo."
  exit 1
fi

# Backup the current /etc/hosts file
cp /etc/hosts /etc/hosts.bak

# Clear existing entries for localhost and facebook.com in the /etc/hosts file
grep -vE "127\.0\.0\.2\s+localhost|8\.8\.8\.8\s+facebook\.com" /etc/hosts > /tmp/hosts_tmp

# Append the new entries to the file
{
  echo "127.0.0.2 localhost"
  echo "8.8.8.8 facebook.com"
} >> /tmp/hosts_tmp

# Replace the /etc/hosts file with the updated one
mv /tmp/hosts_tmp /etc/hosts

echo "The /etc/hosts file has been successfully updated."
